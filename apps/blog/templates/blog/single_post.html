{% extends "base.html" %}
{% load static %}
{% load markdownify %}

{% block title %}
  {{ title.name }}
{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" href="{% static "blog/css/blog_styles.css" %}">
{% endblock %}

{% block content %}
  <article>
    <div class="post-header">
      <div class="container post-header__container">
        <div class="post-header__text">
          <h2 class="title-h2 post-header__name">{{ post.name }}</h2>
          <div class="post-header__meta">
            <span class="text post-header__meta-item">{{ post.category }}</span>
            <span class="text post-header__meta-item">
              –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ post.pub_datetime|date:"d.m.Y"}}
            </span>
          </div>
        </div>
        {% if post.cover %}
          <img class="post-header__image" src="{{ post.cover.url }}" alt="–û–±–ª–æ–∂–∫–∞ –ø–æ—Å—Ç–∞"/>
        {% endif %}
        </div>
    </div>

    <div class="post-content">
      <div class="container post-content__container">
        <aside class="post-content__aside post-aside">
          <div>
            <h4 class="title-h4 post-aside__title">–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è</h4>
            <p class="text text_secondary">{{ post.minutes_to_read }} –º–∏–Ω.</p>
          </div>
          <nav class="post-nav">
            <h4 class="title-h4 post-aside__title">–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ</h4>
            <ol class="post-nav__list">
              {% for title in post.table_of_contents %}
                <li class="text text_secondary">{{ title }}</li>
              {% endfor %}
            </ol>
          </nav>
          <div class="post_aside__buttons">
            <button class="button text">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            <button class="button">üíñ</button>
          </div>
        </aside>

        <div class="markdown post-content__text">
          {{ post.content|markdownify }}
        </div>
      </div>
    </div>
  </article>
  
  <div class="container">
    <section class="post-feed">
      <h2 class="title-h2 post-feed__title">–°–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–∫–∂–µ</h2>

      {% if post.recommended_posts|length %}
        {% include "blog/includes/posts_gallery.html" with posts=post.recommended_posts.all %}
      {% else %}
        <p class="text">–ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç</p>
      {% endif %}
    </section>
  </div>
{% endblock %}